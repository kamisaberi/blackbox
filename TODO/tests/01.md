I understand your request. You want to create a dedicated **`blackbox-tests`** folder for independent components that can be built separately from the main application. This provides a cleaner separation for focused unit testing.

Here's the updated approach to the project structure and test setup:

**1. Top-Level Test Directory**

```text
blackbox/
├── blackbox-core/
├── blackbox-tower/
├── blackbox-hud/
├── blackbox-sim/
└── blackbox-tests/          # NEW: Top-level tests
    ├── core/                # C++ Core Tests
    │   ├── CMakeLists.txt   # Standalone build config
    │   ├── ring_buffer_test.cpp
    │   ├── string_utils_test.cpp
    │   └── ...
    └── api/                 # Go Tower Tests (Can be added later)
```

**2. C++ Test Files (Example: `blackbox-tests/core/ring_buffer_test.cpp`)**
This is the same GoogleTest code I provided before, but now placed in a dedicated location.

```cpp
#include <gtest/gtest.h>
#include "blackbox/ingest/ring_buffer.h"
#include <string>
#include <thread>

TEST(RingBufferTest, BasicPushPop) {
    blackbox::ingest::RingBuffer<16> buffer;
    const char* data = "Hello World";

    // Push
    bool pushed = buffer.push(data, 11);
    EXPECT_TRUE(pushed);

    // Pop
    blackbox::ingest::LogEvent event;
    bool popped = buffer.pop(event);
    EXPECT_TRUE(popped);

    // Verify Data
    std::string result(event.raw_data, event.length);
    EXPECT_EQ(result, "Hello World");
}

// More RingBuffer tests...
```

**3. The Standalone CMake File (`blackbox-tests/core/CMakeLists.txt`)**
This is the key part. It builds *only* the tests and links against the *required* source code from the `blackbox-core` project.

```cmake
cmake_minimum_required(VERSION 3.20)
project(blackbox-core-tests CXX)

set(CMAKE_CXX_STANDARD 20)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

# Link to the root Blackbox project
# Make sure to replace this with the correct relative path
set(BLACKBOX_ROOT_DIR "../../blackbox-core")

# Include Directories
include_directories(
    ${BLACKBOX_ROOT_DIR}/include
)

# GoogleTest (FetchContent)
include(FetchContent)
FetchContent_Declare(
  googletest
  URL https://github.com/google/googletest/archive/refs/tags/v1.14.0.zip
)
set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
FetchContent_MakeAvailable(googletest)

# List Test Files (and *required* source files)
set(TEST_SOURCES
    ring_buffer_test.cpp

    # Link the actual implementation to the unit tests here
    ${BLACKBOX_ROOT_DIR}/src/ingest/ring_buffer.cpp
    ${BLACKBOX_ROOT_DIR}/src/common/logger.cpp    # Needed for some macros (can mock if you want pure isolation)
)

# Create the Executable
add_executable(core_tests ${TEST_SOURCES})

# Link Libraries
target_link_libraries(core_tests PRIVATE
    GTest::gtest_main
    Boost::system
    Threads::Threads # May be needed for some boost components
)

# Discover Tests (Optional)
include(GoogleTest)
gtest_discover_tests(core_tests)
```

**Key Points in the CMake File:**

1.  **`set(BLACKBOX_ROOT_DIR "../../blackbox-core")`**: This is the most important line. Replace the path to indicate where your `blackbox-core` folder is located relative to `blackbox-tests`.
2.  **`include_directories(${BLACKBOX_ROOT_DIR}/include)`**: Include the necessary header files.
3.  **`set(TEST_SOURCES ...)`**: List the test files AND all the `.cpp` files needed for the test to compile (e.g., `ring_buffer.cpp`). You only need to list the `.cpp` files that contain actual *logic* (not just interface declarations).
4.  **`target_link_libraries(...)`**: You only link libraries to the *test* target. It does not affect the main `blackbox-core` project.

**4. Build and Run**

To build and run the tests:
```bash
cd blackbox-tests/core
mkdir build
cd build
cmake ..
make
./core_tests
```

**5. Benefits of this structure:**

*   **Isolated Testing:** The tests are completely separate from the main build system.
*   **Clear Dependencies:** You explicitly state which source files are needed for each test suite.
*   **Fast Iteration:** You can modify the test files and recompile them quickly without rebuilding the entire project.

**6. Adapting this for Other Modules**
Create similar structures for:
*   `blackbox-tests/api` (Go tests using `httptest`).
*   `blackbox-tests/sim` (Python tests using `unittest`).

This approach gives you a robust, professional testing framework for your entire project. Remember to adapt the file paths and dependency inclusions according to your project's layout.